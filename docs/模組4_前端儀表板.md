# 📦 模組4: 前端儀表板

## 1️⃣ 第一性原理拆解

**核心知識點：使用者介面設計 (UI/UX)**

```
最根本的問題：
「怎麼讓不懂電腦的人也能輕鬆使用？」

生活類比：
├─ 電梯：只有上下兩個按鈕→簡單明確
├─ 提款機：一步步引導→不會迷路
└─ 自助點餐機：圖片+文字→清楚易懂

軟體中的實現：
資訊階層 + 互動流程 + 視覺引導 = 好用的介面
```

**拆解成3個子問題：**
1. **資訊架構**：「要顯示哪些資訊？怎麼分類？」
2. **互動設計**：「使用者要做哪些操作？順序如何？」
3. **視覺設計**：「怎麼用顏色、排版讓資訊易讀？」

---

## 2️⃣ 模組設計

### 設計目標
建立直覺易用的客戶端介面，讓用戶能輕鬆下單與查詢訂單。

### 資訊架構圖

```
前端儀表板結構
│
├─ 📊 首頁 (Dashboard)
│   ├─ 本月訂單統計（卡片）
│   ├─ 最近訂單列表（表格）
│   └─ 快速操作按鈕（新增訂單）
│
├─ 📦 我的訂單
│   ├─ 訂單列表（可篩選）
│   │   └─ 點擊→訂單詳情（跳出視窗）
│   └─ 新增訂單按鈕
│
├─ 🛍️ 商品目錄
│   ├─ 商品卡片（網格排列）
│   └─ 點擊→加入訂單
│
└─ 👤 個人資料
    ├─ 基本資料編輯
    └─ 密碼變更

├─ 🔧 後台管理 (Admin Only)
│   ├─ 📊 營收總覽 (Dashboard)
│   │   └─ 全站銷售統計
│   ├─ 📦 訂單管理 (全部訂單)
│   │   └─ 狀態修改 (接單/出貨/完成)
│   ├─ 🛍️ 商品管理
│   │   └─ 新增/編輯/上下架
│   └─ 👥 用戶管理 (Super Admin)
│       └─ 權限設定/停用帳號
```

### 核心頁面設計

| 頁面 | 主要元素 | 互動功能 |
|------|---------|---------|
| 首頁 | 統計卡片、最近訂單表格 | 快速下單按鈕 |
| 訂單列表 | 篩選器、訂單表格 | 點擊查看詳情、取消訂單 |
| 新增訂單 | 商品選擇、數量輸入、地址表單 | 送出訂單 |
| 個人資料 | 資料表單 | 編輯儲存 |
| **後台-營收總覽** | 全站業績卡片、熱銷商品排行 | 匯出報表 |
| **後台-訂單管理** | 跨用戶訂單列表、狀態操作區 | 修改狀態 (待處理→已出貨) |
| **後台-商品管理** | 商品列表、編輯 Modal | 新增、編輯、上架/下架 |
| **後台-用戶管理** | 用戶列表、角色下拉選單 | 修改角色、停用/啟用帳號 |

### 可維護性設計：元件化

**設計原則**：重複的東西做成元件，改一處全部生效

```
當你發現「訂單卡片」在3個地方出現：
1. 首頁的最近訂單
2. 訂單列表頁
3. 搜尋結果頁

→ 建立 OrderCard 元件，三處引用同一個
→ 未來改卡片樣式，只改一個地方
```

---

## 3️⃣ AI 協作開發提示詞

### 完整 Prompt 範本（Lovable）

```markdown
# 訂單管理前端需求

請幫我建立一個訂單管理系統的客戶端介面：

## 整體風格
- 乾淨簡約的設計
- 主色調：藍色（專業感）
- 適合桌機和手機使用（響應式）

## 頁面1：首頁 Dashboard

**上半部：統計卡片**
並排顯示3個卡片：
- 本月訂單數（數字大大的）
- 待處理訂單（黃色標示）
- 本月總金額（綠色標示）

**下半部：最近訂單**
顯示最近5筆訂單的表格：
欄位：訂單編號、日期、金額、狀態
狀態用標籤顯示（待處理=黃色、已完成=綠色、已取消=灰色）

## 頁面2：訂單列表

**上方：篩選器**
- 日期範圍選擇器
- 狀態下拉選單（全部/待處理/處理中/已完成）
- 搜尋框（輸入訂單編號）

**主要內容：訂單表格**
顯示欄位：訂單編號、日期、商品、數量、金額、狀態
點擊某一行 → 跳出詳細視窗

**詳細視窗內容：**
- 訂單基本資訊
- 商品明細表格
- 配送資訊
- 如果是「待處理」狀態，顯示「取消訂單」按鈕

## 頁面3：新增訂單

**表單內容：**
1. 選擇商品（下拉選單）
2. 輸入數量
3. 填寫配送地址
4. 填寫備註（選填）
5. 送出按鈕（藍色、大按鈕）

送出後→顯示「訂單已建立！」，並跳轉回訂單列表

## 導航列
固定在頂端，包含：
- Logo（左側）
- 選單：首頁、我的訂單、新增訂單、個人資料
- 登出按鈕（右側）

## 資料來源
暫時使用假資料（mock data），之後會接 Supabase API

請生成這個前端專案的程式碼。
```


### 會員系統 Prompt 範本（Lovable）

```markdown
# 會員驗證系統前端需求

請在現有的訂單管理系統中，加入會員登入與註冊功能：

## 頁面規劃

### 1. 登入頁面 (Login Page)
- **設計**：畫面置中，乾淨的卡片式設計
- **欄位**：
  - 帳號 (Username)
  - 密碼 (Password) - 隱藏輸入內容，提供「顯示密碼」眼睛圖示
- **按鈕**：
  - 「登入」主要按鈕 (Primary Button)
  - 「還沒有帳號？前往註冊」連結
- **互動反饋**：
  - 登入失敗時，在欄位下方顯示紅色錯誤訊息
  - 登入成功後，自動跳轉至首頁 (Dashboard)

### 2. 註冊頁面 (Register Page)
- **設計**：與登入頁風格一致
- **欄位與驗證**：
  - 帳號：必填，4-20字元，僅限英文數字
  - Email：必填，需符合 Email 格式
  - 密碼：必填，8字元以上，需包含英文與數字
  - 確認密碼：需與密碼一致
- **即時驗證**：輸入時若不符合規則，即時顯示提示文字
- **按鈕**：
  - 「註冊」主要按鈕
  - 「已有帳號？返回登入」連結

### 3. 登出功能
- 在導航列 (Navbar) 加入「登出」按鈕
- 點擊後清除登入狀態 (Token)，並導向回登入頁面

## 邏輯實作要求
- **狀態管理**：使用 Context 或 Zustand 管理全域 `user` 狀態
- **持久化**：登入狀態需記錄在 localStorage，重整頁面不登出
- **API 模擬**：
  - 請建立一個 `auth.service.ts` 模擬登入/註冊 API
  - 預設帳號：`admin` / `password123`
  - 註冊成功後自動登入
```

### 元件化 Prompt

```markdown
請建立一個 OrderCard 元件，可以重複使用
輸入：訂單物件
然後在3個頁面引用這個元件
```

### 後台管理介面 Prompt 範本

```markdown
# 後台管理系統前端需求

請在現有專案中加入「後台管理」區塊 (Admin Dashboard)：

## 權限控管 (RBAC)
- 建立一個 `AdminLayout`，只有 `role="admin"` 或 `manager` 可以進入
- 一般用戶 (customer) 訪問後台路徑應被導向回首頁

## 頁面規劃

### 1. 營收儀表板 (Admin Home)
- 顯示全站本月營業額、總訂單數、新註冊用戶數
- 圖表：每日訂單趨勢圖 (使用 Recharts 或類似套件)

### 2. 訂單管理 (Order Admin)
- 顯示**所有用戶**的訂單
- 權限差異：
  - `manager`：只能看，不能改狀態
  - `admin`：可以將狀態改為「已出貨」、「已完成」
- 操作介面：在列表右側加一個「管理」按鈕，點擊跳出狀態修改視窗

### 3. 商品管理 (Product Admin)
- **列表**：顯示商品圖片、名稱、價格、庫存、狀態 (上架/下架)
- **新增/編輯**：彈出視窗 (Modal)
  - 欄位：圖片上傳、名稱、描述、價格、庫存
  - 開關：是否上架
- **刪除**：軟刪除 (Soft Delete)，標記為下架即可

### 4. 用戶管理 (User Admin - Super Admin Only)
- 僅 `role="super_admin"` 可見
- 列表顯示：ID、Email、目前角色
- 動作：
  - 下拉選單修改角色 (Customer/Manager/Admin)
  - 「停用帳號」按鈕 (紅色危險按鈕)

## 導航結構更新
- 在 Navbar 加入「後台管理」連結（僅對管理員顯示）
- 後台側邊欄 (Sidebar)：儀表板 / 訂單 / 商品 / 用戶
```

---

## 4️⃣ 手動功能測試說明

### 測試環境準備
1. 啟動前端開發伺服器 (`npm run dev`)
2. 確認 API 連線正常（或使用 mock data）
3. 準備測試帳號

### 測試案例清單

| 編號 | 測試項目 | 測試步驟 | 預期結果 |
|------|---------|---------|---------|
| T01 | 首頁統計顯示 | 登入後查看首頁 | 顯示正確的訂單數、金額統計 |
| T02 | 響應式設計 | 調整瀏覽器寬度至手機尺寸 | 版面自動調整，無破版 |
| T03 | 訂單篩選 | 選擇「待處理」狀態 | 只顯示待處理訂單 |
| T04 | 訂單詳情 | 點擊訂單列 | 彈出詳情視窗 |
| T05 | 新增訂單 | 填寫表單並送出 | 顯示成功訊息，跳回列表 |
| T06 | 取消訂單 | 在詳情中點擊取消 | 訂單狀態變更為已取消 |
| T07 | 導航功能 | 點擊各選單項目 | 正確切換頁面 |
| T08 | 登出功能 | 點擊登出按鈕 | 返回登入頁面 |
| T09 | 後台權限擋關 | 一般用戶嘗試訪問 `/admin` | 自動導向回首頁或顯示 403 |
| T10 | 後台-修改訂單 | 管理員將訂單改為「已出貨」 | 前台用戶看到狀態同步更新 |
| T11 | 後台-商品下架 | 管理員下架某商品 | 前台新增訂單時找不到該商品 |
| T12 | 後台-提升權限 | 超級管理員將用戶升為管理員 | 該用戶重整後可看到後台入口 |

### 異常情況處理

| 異常情況 | 預期系統反應 |
|---------|-------------|
| API 連線失敗 | 顯示「無法載入資料，請重試」 |
| 表單欄位為空 | 顯示「請填寫必填欄位」 |
| 網路斷線 | 顯示離線提示 |
